!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-multi-gauge",["exports","d3","@angular/core","@angular/common"],e):e(t["ngx-multi-gauge"]={},t.d3,t.ng.core,t.ng.common)}(this,function(t,o,e,a){"use strict";var i=(n.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],n.ctorParameters=function(){return[]},n.ngInjectableDef=e.defineInjectable({factory:function(){return new n},token:n,providedIn:"root"}),n);function n(){}var r=(l.prototype.ngOnInit=function(){var r=this;this.rawData.map(function(t){r.sampleDataName.push(t.data_name),r.sampleTitle.push(t.title),r.sampleData.push(t.value)}),this.totalValue=0,this.sampleData.map(function(t){r.totalValue+=t});var t=this.CHART1.nativeElement;this.svg=o.select(t).append("svg").attr("width",this.width).attr("height",this.height);var a=this.sampleData.map(function(t,e){var a=r.center_circle_size+(e*r.list_margin+(e-1)*r.line_width+(r.list_margin+r.line_width)),i=a+r.line_width;return o.arc().innerRadius(a).outerRadius(i).cornerRadius(r.line_width).padAngle(.07).padRadius(100)}),e=this.sampleData.map(function(t,e){return[{value:100*r.angle_max,arc:a[e]},{value:0*r.angle_max,arc:a[e]},{value:100*(1-r.angle_max),arc:a[e]}]}),i=this.sampleData.map(function(t,e){return[{value:t*r.angle_max,arc:a[e]},{value:(100-t)*r.angle_max,arc:a[e]},{value:100*(1-r.angle_max),arc:a[e]}]}),n=o.pie().sort(null).value(function(t){return t.value});this.svg.selectAll(".empty").data(e).enter().append("g").classed("empty",!0).attr("transform","translate( "+this.width/2+", "+this.height/2+" ) rotate(0)").attr("fill-opacity",function(t,e){return 2/(e+1)}).selectAll("path").data(function(t){return n(t)}).enter().append("path").attr("d",function(t){return t.data.arc(t)}).attr("fill",function(t,e){return 0===e?r.bg_color:"none"});var l=this.svg.selectAll(".list").data(i).enter().append("g").classed("list",!0).attr("transform","translate( "+this.width/2+", "+this.height/2+" ) rotate(0)").attr("fill-opacity",function(t,e){return 2/(e+1)});l.selectAll("path").data(function(t){return n(t)}).enter().append("path").attr("d",function(t){return t.data.arc(t)}).attr("fill",function(t,e){return 0===e?r.line_color:"none"}),this.svg.selectAll(".empty").each(function(t,n,e){o.select(e[n]).selectAll("path").each(function(t,e){if(1===e){var a=t.data.arc.centroid({startAngle:t.startAngle+.05,endAngle:t.startAngle+.001+.05}),i=t.data.arc.centroid({startAngle:0,endAngle:0});l.append("text").text(function(t){return""+r.sampleTitle[n]}).attr("transform","translate("+(i[0]-5)+","+i[1]+")").attr("alignment-baseline","middle").attr("text-anchor","end"),l.append("text").text(function(t){return r.sampleData[n]+"%"}).attr("transform","translate("+(a[0]-15)+","+(a[1]-5)+")").attr("alignment-baseline","middle")}})}),this.svg.selectAll("circle").data(this.rawData).enter().append("circle").attr("cx",this.width/2).attr("cy",this.height/2).attr("r",this.radius/4.5).attr("stroke",this.bg_color).attr("fill","none").attr("stroke-dasharray","3").attr("stroke-width",2)},l.decorators=[{type:e.Component,args:[{selector:"NgxMultiGauge",template:'<div class="chart_container">\r\n  <div class="chart1" #chart1></div>\r\n  <div class="circle_text" >\r\n    <div *ngFor = "let list of rawData"> {{list[\'title\']}} : {{list[\'value\']}} </div>\r\n    <div>종합 : {{ totalValue }} </div>\r\n  </div>\r\n</div>\r\n',styles:[".chart_container{width:500px;height:500px;--border:1px solid #ddd;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;position:relative;font-size:14px}.chart_container .chart1{display:-webkit-box;display:flex}.chart_container .circle_text{width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;position:absolute;font-size:.8em;font-weight:700}"]}]}],l.ctorParameters=function(){return[]},l.propDecorators={CHART1:[{type:e.ViewChild,args:["chart1"]}],rawData:[{type:e.Input}]},l);function l(){this.rawData=[{data_name:"prePro",title:"전처리",value:87},{data_name:"cantPro",title:"비처리",value:91}],this.sampleDataName=[],this.sampleTitle=[],this.sampleData=[],this.totalValue=0,this.width=500,this.height=500,this.bg_color="#E5E5E5",this.line_color="#004C90",this.radius=this.height/2,this.angle_max=.75,this.list_margin=this.height/16,this.line_width=this.height/50,this.center_circle_size=this.height/10}var s=(c.decorators=[{type:e.NgModule,args:[{declarations:[r],imports:[a.CommonModule],exports:[r]}]}],c);function c(){}t.NgxMultiGaugeService=i,t.NgxMultiGaugeComponent=r,t.NgxMultiGaugeModule=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-multi-gauge.umd.min.js.map