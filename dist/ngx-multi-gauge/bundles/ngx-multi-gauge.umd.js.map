{"version":3,"file":"ngx-multi-gauge.umd.js.map","sources":["ng://ngx-multi-gauge/lib/ngx-multi-gauge.service.ts","ng://ngx-multi-gauge/lib/ngx-multi-gauge.component.ts","ng://ngx-multi-gauge/lib/ngx-multi-gauge.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxMultiGaugeService {\n\n  constructor() { }\n}\n","import {Component, OnInit, ViewChild, Input, ElementRef, AfterViewInit} from '@angular/core';\nimport * as d3 from 'd3';\n\n\n@Component({\n  selector: 'NgxMultiGauge',\n  templateUrl: './ngx-multi-gauge.component.html',\n  styleUrls: ['./ngx-multi-gauge.component.styl']\n})\nexport class NgxMultiGaugeComponent implements OnInit {\n\n  @ViewChild('chart1') CHART1: ElementRef<any>;\n\n  constructor() { }\n\n  @Input() rawData = [ { title_en : 'prePro' , title_kr : 'ì ì²ë¦¬', value : 87 }, { title_en : 'cantPro', title_kr : 'ë¹ì²ë¦¬', value : 91 }];\n\n  sampleTitleEn = [];\n  sampleTitleKr = [];\n  sampleData    = [];\n  totalValue    = 0;\n\n  width = 500;\n  height = 500;\n  bg_color = \"#E5E5E5\";\n  line_color = \"#004C90\";\n  radius = this.height / 2;\n  angle_max = 0.75; // 100%ì ê¸°ì¤ ê¸¸ì´\n\n  list_margin = this.height / 16; // í­ëª©ê³¼ í­ëª© ì¬ì´ì ê±°ë¦¬\n  line_width = this.height / 50;  // ì ëì´\n  center_circle_size = this.height / 10; // ê°ì´ë° êµ¬ë© í¬ê¸°\n\n\n  svg: any;\n  pie: any;\n\n\n  ngOnInit() {\n\n    // ìì ì»´í¬ëí¸ì inputë°ì´í°ê° ìëì§ íì¸\n    // console.log(this.rawData);\n\n    // ë°ì ë°ì´í°ë¥¼ ê° ë¶ë¶ì¼ë¡ ëëì´ì¤\n    this.rawData.map( v => {\n      this.sampleTitleEn.push(v.title_en);\n      this.sampleTitleKr.push(v.title_kr);\n      this.sampleData.push(v.value);\n    });\n\n    // ì¢í© ë°ì´í°\n    this.totalValue = 0;\n    this.sampleData.map(v => {\n      this.totalValue += v;\n    });\n\n    const _CHART =  this.CHART1.nativeElement;\n\n    this.svg = d3.select(_CHART)\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height);\n\n\n    // ****************************  ì°¨í¸ë¶ë¶  ********************************** //\n    const arcs = this.sampleData.map((v, i) => {\n      const inner_calc = this.center_circle_size + ( i * this.list_margin + ((i - 1) * this.line_width ) + (this.list_margin + this.line_width) ); // i x ë§ì§ + ( (i-1) x ì ëì´ ) + (ë§ì§+ì ëì´)\n      const outer_calc = inner_calc + this.line_width;\n\n      return d3.arc()\n        .innerRadius( inner_calc )\n        .outerRadius( outer_calc )\n        .cornerRadius(this.line_width)\n        .padAngle(.07)\n        .padRadius(100);\n    });\n\n    const emptyPieData = this.sampleData.map((v, i) => {\n      v = 100;\n      return [\n        {value: v * this.angle_max        , arc : arcs[i]},   // value\n        {value: (100 - v) * this.angle_max, arc : arcs[i]},   // ëë¨¸ì§\n        {value: 100 * (1 - this.angle_max), arc : arcs[i]},   // ë¹ê³³\n      ];\n    });\n\n    const pieData = this.sampleData.map((v, i) => {\n      return [\n        {value: v * this.angle_max        , arc : arcs[i]},   // value\n        {value: (100 - v) * this.angle_max, arc : arcs[i]},   // ëë¨¸ì§\n        {value: 100 * (1 - this.angle_max), arc : arcs[i]},   // ë¹ê³³\n      ];\n    });\n\n    const pie = d3.pie()\n      .sort(null)\n      .value(d => {\n        // console.log(d);\n        return d[`value`];\n      });\n\n\n    // const test: any = [{ value : 80 }, { value : 0 }, { value : 20 }];\n    // console.log(pie(test));\n\n    // ë¹ ë°°ê²½ ë¼ì¸ë°\n    const empty_bg = this.svg.selectAll('.empty')\n      .data(emptyPieData)\n      .enter()\n      .append('g').classed('empty', true)\n      .attr('transform', `translate( ${ this.width / 2 }, ${ this.height / 2 } ) rotate(0)` )\n      .attr('fill-opacity', (d, i) => 2 / (i + 1));\n\n    empty_bg.selectAll('path').data(d => { return pie(d); })\n      .enter()\n      .append('path')\n      .attr('d', d => d.data.arc(d) )\n      .attr('fill', (d, i) => i === 0 ? this.bg_color : 'none' );\n\n\n\n    // ì¤ì  ë°ì´í° ë°\n    const g = this.svg.selectAll('.list')\n      .data(pieData)\n      .enter()\n      .append('g').classed('list', true)\n      .attr('transform', `translate( ${ this.width / 2 }, ${ this.height / 2 } ) rotate(0)` )\n      .attr('fill-opacity', (d, i) => 2 / (i + 1));\n\n    g.selectAll('path').data(d => { return pie(d); })\n      .enter()\n      .append('path')\n      .attr('d', d => d.data.arc(d) )\n      .attr('fill', (d, i) => i === 0 ? this.line_color : 'none' );\n\n\n\n    // íì¤í¸ ë¶ë¶ (ë°ì´í° ê°)\n    this.svg.selectAll('.empty').each( (d, index, _this) => {\n      const el = d3.select(_this[index]);\n      // console.log(el);\n      el.selectAll('path').each((r, i) => {\n        if( i === 1 ) {\n          const centroid  = r[`data`].arc.centroid({ startAngle: r[`startAngle`] + 0.05, endAngle : r[`startAngle`] + 0.001 + 0.05 });\n          const title_centroid = r[`data`].arc.centroid({ startAngle: 0, endAngle : 0 });\n          // console.log(`r=>`, r);\n          // console.log(`centroid1=>`, centroid);\n          // console.log(`centroid2=>`, centroid2);\n\n          // ë¹ì²ë¦¬ ì ì²ë¦¬ í­ëª©ì ì ëª© íì¤í¸\n          g.append('text')\n            .text( (v) => {\n              return `${ this.sampleTitleKr[index] }`;\n            })\n            .attr('transform', `translate(${title_centroid[0] - 5 },${title_centroid[1]})`)  // ëë°ë¡ ììë íì¤í¸\n            .attr('alignment-baseline', `middle`)\n            .attr('text-anchor', `end`);\n\n          // ê° í­ëª© ê° íì¤í¸ 20%, 50%\n          g.append('text')\n            .text( (v) => {\n              return `${ this.sampleData[index] }%`;\n            })\n            // .attr('transform', `translate(${centroid[0]},${centroid[1]}) rotate(${180 / Math.PI * (r[`startAngle`]) + 7})`)  // ë°ì ë§ì¶ì´ì íì ëì´ìë íì¤í¸\n            .attr('transform', `translate(${centroid[0] - 15},${centroid[1] - 5 })`)  // ëë°ë¡ ììë íì¤í¸\n            .attr('alignment-baseline', `middle`);\n\n        }\n\n      });\n    });\n\n\n\n\n    // ****************************  ê°ì´ë° ì ë¶ë¶  ********************************** //\n    this.svg.selectAll('circle')\n      .data(this.rawData)\n      .enter()\n      .append('circle')\n      .attr('cx',this.width / 2)\n      .attr('cy',this.height / 2)\n      .attr('r',this.radius / 4.5)\n      .attr('stroke', this.bg_color)\n      .attr('fill','none')\n      .attr('stroke-dasharray','3')\n      .attr('stroke-width',2);\n\n\n  }\n}\n","import { NgModule } from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport { NgxMultiGaugeComponent } from './ngx-multi-gauge.component';\n\n@NgModule({\n  declarations: [NgxMultiGaugeComponent],\n  imports: [CommonModule],\n  exports: [NgxMultiGaugeComponent]\n})\nexport class NgxMultiGaugeModule { }\n"],"names":["Injectable","d3.select","d3.arc","d3.pie","Component","ViewChild","Input","NgModule","CommonModule"],"mappings":"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"}
